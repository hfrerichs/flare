#!/bin/bash

###############################################################################
# predefine parameter
run="run.conf"
###############################################################################


###############################################################################
# search argument list
for opt in "$@"; do
    par=${opt%%=*}
    val=${opt##*=}
    if [ "$par" == "run" ]; then
        run=$val
        #echo "run =" $run
    elif [ "$opt" == "-debug" ]; then
        FLAG_DEBUG=1
    fi
done
###############################################################################


###############################################################################
# check for run configuration
if [ ! -f "$run" ]; then
	echo error: missing file "$run"; echo
	exit -1
fi
cp $run run_input
###############################################################################


###############################################################################
# run FLARE

if [ "$FLAG_DEBUG" == "" ]; then
	flare_bin
else # for debugging only
	gdb flare_bin_debug
fi
###############################################################################


###############################################################################
# cleanup
rm -rf input
rm -rf run_input
###############################################################################
